{% extends theme("layout.html") %}
{% block content %}

<div id="brdmain">

    <div id="brdtop">
        <div class="inbox clearfix">
            <ul class="breadcrumb">
                <li><a href="{{ url_for('forum.index') }}">Forum</a></li>
                <li class="active">{{ user.username }}</li>
            </ul>
        </div>
    </div>

    <div class="row">
        <!-- left column -->
        <div class="col-md-2 col-sm-2 col-xs-2">
            <div class="panel profile-widget">
                <div class="panel-heading profile-widget-header">
                    <a href="{{ user.url }}">{{ user.username }}</a>
                </div>

                <div class="panel-body profile-widget-content">
                    <div class="profile-picture">
                        {% if user.avatar %}
                        <img src="{{ user.avatar }}" alt="Avatar" class="profile-avatar">
                        {% endif %}
                    </div>

                    <div class="profile-online">
                        {% if user|is_online %}
                        <span class="label label-success">Online</span>
                        {% else %}
                        <span class="label label-default">Offline</span>
                        {% endif %}
                    </div>

                    <div class="profile-pm">
                        {% if current_user.is_authenticated() %}
                        <a href="{{ url_for('user.new_message') }}?to_user={{ user.username }}">Send a Message</a>
                        {% endif %}
                    </div>

                    <div class="profile-topics">
                        <a href="{{ url_for('user.view_all_topics', username=user.username) }}">All Topics</a>
                    </div>

                    <div class="profile-posts">
                        <a href="{{ url_for('user.view_all_posts', username=user.username) }}">All Posts</a>
                    </div>

                </div>
            </div> <!-- end profile widget -->
        </div> <!-- end col -->


        <!-- middle column -->
        <div class="col-md-7 col-sm-7 col-xs-7">
            <div class="panel profile-widget">
                <div class="panel-heading profile-widget-header">Info</div>
                <div class="panel-body profile-widget-content">

                    {% if user.notes %}
                        {{ user.notes|markup|safe }}
                    {% else %}
                        User has not added any notes about him.
                    {% endif %}

                </div>
            </div> <!-- end profile widget -->

            {% if user.signature %}
            <div class="panel profile-widget">
                <div class="panel-heading profile-widget-header">Signature</div>
                <div class="panel-body profile-widget-content">

                    {{ user.signature|markup|safe }}

                </div>
            </div> <!-- end profile widget -->
            {% endif %}
        </div> <!-- end col -->


        <!-- right column -->
        <div class="col-md-3 col-sm-2 col-xs-2">
            <div class="panel profile-widget">
                <div class="panel-heading profile-widget-header">User Stats</div>
                <div class="panel-body profile-widget-content">

                <div class="profile-stats-field">
                        <div class="col-md-5 col-sm-6 col-xs-6"><p class="stats-right">Group:</p></div>
                        <div class="col-md-7 col-sm-6 col-xs-6"><p>{{ user.primary_group.name }}</p></div>
                    </div>

                    <div class="profile-stats-field">
                        <div class="col-md-5 col-sm-6 col-xs-6"><p class="stats-right">Joined:</p></div>
                        <div class="col-md-7 col-sm-6 col-xs-6"><p>{{ user.date_joined|format_date('%b %d %Y') }}</p></div>
                    </div>

                    <div class="profile-stats-field">
                        <div class="col-md-5 col-sm-6 col-xs-6"><p class="stats-right">Posts:</p></div>
                        <div class="col-md-7 col-sm-6 col-xs-6"><p>{{ user.post_count }} ({{ user.posts_per_day }} per day)</p></div>
                    </div>

                    <div class="profile-stats-field">
                        <div class="col-md-5 col-sm-6 col-xs-6"><p class="stats-right">Last seen:</p></div>
                        <div class="col-md-7 col-sm-6 col-xs-6"><p>{%- if user.lastseen -%} {{ user.lastseen|time_since }} {%- else -%} Never seen {%- endif -%}</p></div>
                    </div>

                    <div class="profile-stats-field">
                        <div class="col-md-5 col-sm-6 col-xs-6"><p class="stats-right">Last post:</p></div>
                        <div class="col-md-7 col-sm-6 col-xs-6"><p>
                            {%- if user.last_post -%}
                            <a href="{{ user.last_post.url }}">{{ user.last_post.date_created|time_since }}</a>
                            {%- else -%}
                                Never
                            {%- endif -%}
                      </p></div>
                    </div>

                    <div class="profile-stats-field">
                      <div class="col-md-5 col-sm-6 col-xs-6"><p class="stats-right">Location:</p></div>
                      <div class="col-md-7 col-sm-6 col-xs-6"><p>{%- if user.location -%} {{ user.location }} {%- else -%} No Info {%- endif -%}</p></div>
                    </div>

                    <div class="profile-stats-field">
                      <div class="col-md-5 col-sm-6 col-xs-6"><p class="stats-right">Birthday:</p></div>
                      <div class="col-md-7 col-sm-6 col-xs-6"><p>{% if user.birthday %} {{ user.birthday|format_date('%b %d %Y') }} {% else %} No Info {% endif %} {% if user.gender %} ({{ user.gender }}) {% endif %}</p></div>
                    </div>

                </div>
            </div> <!-- end profile-widget -->

        </div> <!-- end col -->
    </div> <!-- end row -->

</div>
{% endblock %}
